select * from raw_materials;

select * from items;

create table items (
id serial primary key,
name text unique,
amount int default 0 check (amount <= amount_limits),
amount_limits int default 10000,
drop_chance int default 3
);

update items
set amount = amount - 1000
where name = 'Rock';

select name, amount from items
where name = 'Iron_chunk';


create table worker (
id serial primary key,
name text default 'Human',
busy bool default false,
grade text default 'common',
level int default 1,
job text default 'None',
container_id text default null
);

create table worker_info (
id serial primary key,
worker_id int unique references worker(id) not null,
level int default 1,
xp int default 0,
hp int default 5 check (worker_info.hp <= worker_info.max_hp),
max_hp int default 5,
attack int default 1
);

drop table worker;

insert into worker_info (worker_id, max_hp, hp)
values (39,
        (select level from worker where id = 39) * 5,
        (select level from worker where id = 39) * 5)
returning *;

update worker_info
set hp = hp - (select attack from worker_info where id = 1)
where id = 2
returning id;


create table mobs (
    id serial primary key,
    level int default 1,
    hp int default 5 check (mobs.hp <= mobs.max_hp),
    max_hp int default 5,
    attack int default 1);


insert into mobs (level)
values (1);